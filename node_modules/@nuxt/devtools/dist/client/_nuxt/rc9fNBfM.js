import{d as q,Y as te,r as E,Z as Y,a0 as ne,m as u,G as X,i as c,f as n,k as t,v as D,F as z,n as Z,h as V,j as b,p as S,D as H,a1 as pe,a2 as me,S as fe,J,K as W,a3 as O,_ as oe,o as l,a4 as le,V as ae,a as I,a5 as ve,a6 as ge,a7 as ie,t as F,a8 as he,l as R,b as se,a9 as xe,e as be,aa as we,ab as _e,ac as ye,ad as $e,X as ke,ae as Ce,af as Ve,ag as Pe,ah as Ae,ai as De}from"./Bysyzw-g.js";import{_ as Fe}from"./ZTJOnUjs.js";import{_ as Ne}from"./CtUB4FID.js";import{_ as Se}from"./Ci0JrwP0.js";import{_ as Ie}from"./C6_B1_1h.js";import{_ as Te}from"./CQTsRCSt.js";import{_ as Ue}from"./omNoIW9g.js";import{_ as je}from"./dPiMYs67.js";import{D as Ee}from"./BcJws1i5.js";import"./CXTghDHT.js";import"./CdlRa3-_.js";import"./DK4YETzW.js";const Le={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},Be={for:"drop-zone-input","text-3xl":"",hover:"text-green cursor-pointer","transition-all":""},ze={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},Me={grid:"~ cols-minmax-8rem gap-8","overflow-auto":"",p6:""},Oe={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Re=["src"],Ke={flex:"~ gap1","items-center":""},Xe={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},Ge=q({__name:"AssetDropZone",props:{modelValue:{type:Boolean,required:!0},folder:{type:String,required:!0}},setup(B){const s=B,f=te(s,"modelValue"),k=E(),o=E([]);function v(a){k.value=a.target,f.value=!0}function w(a){a.target===k.value&&(f.value=!1)}function T(a){a.preventDefault()}function P(a){a.preventDefault(),g(a.dataTransfer.files)}function g(a){const p=Array.from(a||[]);if(p.length){const x=[],_=o.value.map(r=>r.name);for(const r of p)if(_.includes(r.name)){let A=1;const[y,U]=r.name.split(".");for(;_.includes(`${y} (${A}).${U}`);)A++;const K=`${y}-${A}.${U}`,i=new Blob([r],{type:r.type}),e=new File([i],K,{lastModified:Date.now()});x.push(e),_.push(K)}else r.type===""&&O({message:"Folders are not supported yet",icon:"carbon:face-dissatisfied",classes:"text-orange"}),x.push(r);o.value=[...o.value,...x]}}async function L(){if(pe.value||me.value)return;fe("assets:upload");const a=[];for(const p of o.value){const x=new FileReader;x.readAsDataURL(p);const r=(await new Promise(A=>{x.onload=()=>A(x.result)})).split(";base64,").pop();a.push({path:p.name,encoding:"base64",content:r})}await J.writeStaticAssets(await W(),[...a],s.folder).then(()=>{m(),O({message:"Files uploaded successfully!",icon:"i-carbon:checkmark"})}).catch(p=>{m(),O({message:`Error uploading files: ${p?.message??"unknown"}`,icon:"i-carbon-warning",classes:"text-red"})}),f.value=!1}function G(a){o.value?.splice(a,1)}function M(a){return URL.createObjectURL(a)}function h(a,p){const[x,_]=a.name.split("."),r=p.replace(/\.\w+$/,""),A=`${r}.${_}`;return r.length===0?(alert("File name must be at least 1 characters long"),x):(Object.defineProperty(a,"name",{value:A,writable:!1}),o.value.splice(o.value.indexOf(a),1,a),a)}function d(){o.value=[]}function m(){f.value=!1,d()}return Y("dragenter",v),Y("dragleave",w),Y("dragover",T),Y("drop",P),(a,p)=>{const x=oe,_=le,r=ae,A=ne("tooltip");return l(),u("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:H(n(f)?"opacity-100 visible":"opacity-0 invisible")},[X(c(x,{icon:"carbon-close",title:"Close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",border:!1,onClick:m},null,512),[[A,"Close",void 0,{"bottom-end":!0}]]),n(o)?.length?(l(),u("div",ze,[p[4]||(p[4]=t("div",{px6:"",py6:""},[t("h1",{"text-2xl":""}," Upload "),t("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1)),t("div",Me,[(l(!0),u(z,null,Z(n(o),(y,U)=>(l(),u("div",{key:y.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[t("div",Oe,[t("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:M(y)},null,8,Re)]),t("div",Ke,[c(r,{n:"xs","h-full":"","flex-auto":"","model-value":y.name,"onUpdate:modelValue":K=>h(y,K.target.value)},null,8,["model-value","onUpdate:modelValue"]),c(x,{n:"red",icon:"carbon-trash-can","h-full":"","flex-none":"",title:"Remove file",onClick:K=>G(U)},null,8,["onClick"])])]))),128))]),t("div",Xe,[n(o).length?(l(),V(x,{key:0,n:"red",onClick:d},{default:b(()=>[c(_,{icon:"carbon-clean"}),p[2]||(p[2]=D(" Clear "))]),_:1})):S("",!0),c(x,{disabled:!n(o).length,n:"primary solid",onClick:L},{default:b(()=>[c(_,{icon:"carbon-cloud-upload"}),p[3]||(p[3]=D(" Upload "))]),_:1},8,["disabled"])])])):(l(),u("div",Le,[t("label",Be,[c(_,{icon:"carbon-cloud-upload","mr-2":""}),p[1]||(p[1]=D(" Drop files here or click to select "))]),t("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:p[0]||(p[0]=y=>g(y.target.files))},null,32)]))],2)}}}),Ze=q({__name:"AssetFontPreview",props:{asset:{}},setup(B){const s=B,f=I(()=>`devtools-assets-${ve(s.asset)}`);return ge(I(()=>`
  @font-face {
    font-family: '${f.value}';
    src: url('${s.asset.publicPath}');
  }
`)),(k,o)=>(l(),u("div",{"of-hidden":"",style:ie({fontFamily:`'${n(f)}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),qe={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},Je=["src"],We={key:2,"i-carbon-document":"","text-3xl":"",op20:""},Ye={key:3,"w-full":"","self-start":"",p4:""},He=["textContent"],Qe={key:4},et=["src","autoplay","controls"],tt={key:5},nt={key:0,"i-carbon-volume-up":"","text-3xl":"",op20:""},ot=["src"],lt={key:6,"i-carbon-help":"","text-3xl":"",op20:""},re=q({__name:"AssetPreview",props:{asset:{},textContent:{},detail:{type:Boolean}},setup(B){return(s,f)=>{const k=Ze;return l(),u("div",qe,[s.asset.type==="image"?(l(),u("img",{key:0,src:s.asset.publicPath},null,8,Je)):s.asset.type==="font"?(l(),V(k,{key:s.asset.publicPath,asset:s.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):s.asset.type==="text"&&!s.textContent?(l(),u("div",We)):s.asset.type==="text"&&s.textContent?(l(),u("div",Ye,[t("pre",{"max-h-10rem":"","of-hidden":"","text-xs":"","font-mono":"",textContent:F(s.textContent)},null,8,He)])):s.asset.type==="video"?(l(),u("div",Qe,[t("video",{src:s.asset.publicPath,autoplay:s.detail,controls:s.detail},null,8,et)])):s.asset.type==="audio"?(l(),u("div",tt,[s.detail?(l(),u("audio",{key:1,src:s.asset.publicPath,controls:""},null,8,ot)):(l(),u("div",nt))])):(l(),u("div",lt))])}}}),st={relative:"",flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},at={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},it=q({__name:"AssetGridItem",props:{asset:{},folder:{}},setup(B){const s=B,f=I(()=>s.folder&&s.asset.path.startsWith(s.folder)?s.asset.path.slice(s.folder.length):s.asset.path);return(k,o)=>{const v=le,w=re;return l(),u("button",st,[k.asset.layer?(l(),V(v,{key:0,icon:"i-carbon-layers",absolute:"","right-4":"","top-4":"","bg-primary":""})):S("",!0),c(w,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:k.asset},null,8,["asset"]),t("div",at,F(n(f)),1)])}}}),ue=q({__name:"AssetListItem",props:{item:{},index:{default:0},modelValue:{}},setup(B,{emit:s}){const f=B,o=te(f,"modelValue",s,{passive:!0}),v=I(()=>f.item?.children?.length),w=E(!0),T=I(()=>v.value?"i-carbon-folder":f.item.type==="image"?"i-carbon-image":f.item.type==="video"?"i-carbon-video":f.item.type==="audio"?"i-carbon-volume-up":f.item.type==="font"?"i-carbon-text-small-caps":f.item.type==="text"?"i-carbon-document":f.item.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(P,g)=>{const L=le,G=ue;return l(),u("div",null,[t("button",{flex:"~ gap-2","w-full":"","items-center":"",hover:"bg-active",px4:"",py1:"",style:ie({paddingLeft:`calc(1rem + ${P.index*1.5}em)`}),class:H({"bg-active":!n(v)&&n(o)?.filePath===P.item?.filePath}),border:"b base",onClick:g[0]||(g[0]=M=>n(v)?w.value=!n(w):o.value=P.item)},[t("div",{class:H(n(T))},null,2),t("span",{class:H({"flex items-center":n(v)}),"flex-auto":"","text-start":"","text-sm":"","font-mono":""},[D(F(P.item.path)+" ",1),P.item.layer?(l(),V(L,{key:0,icon:"i-carbon-layers","bg-primary":""})):S("",!0)],2),n(v)?(l(),V(L,{key:0,icon:"carbon:chevron-right","transform-rotate":n(w)?90:0,transition:""},null,8,["transform-rotate"])):S("",!0)],6),n(w)?he(P.$slots,"default",{key:0},()=>[(l(!0),u(z,null,Z(P.item?.children,M=>(l(),V(G,{key:M.filepath,modelValue:n(o),"onUpdate:modelValue":g[1]||(g[1]=h=>R(o)?o.value=h:null),item:M,index:P.index+1},null,8,["modelValue","item","index"]))),128))]):S("",!0)])}}}),rt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},ut={flex:"~","items-center":"","justify-center":""},dt={"max-w-full":"","w-full":"","table-fixed":""},ct={flex:"~ gap-1","w-full":"","items-center":""},pt={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},mt={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},ft={capitalize:""},vt={key:0},gt={op70:""},ht={flex:"~ gap2 wrap"},xt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},bt={flex:"~ gap2 wrap justify-center"},wt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},_t={flex:"~ gap2 wrap justify-center"},yt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},$t={flex:"","justify-end":"","gap-4":""},kt=q({__name:"AssetDetails",props:{modelValue:{}},setup(B,{emit:s}){const o=te(B,"modelValue",s,{passive:!0}),v=se(async()=>{if(o.value.type==="image")return J.getImageMeta(await W(),o.value.filePath)}),w=E(!1),T=E(),P=E(0),g=se(async()=>{if(o.value.type!=="text")return;P.value;const i=await J.getTextAssetContent(await W(),o.value.filePath);return T.value=i,i});async function L(){if(g.value!==T.value)try{await J.writeStaticAssets(await W(),[{path:o.value.path,content:T.value,override:!0}],""),w.value=!1,P.value++,O({message:"Updated",icon:"i-carbon-checkmark",classes:"text-green"})}catch(i){console.error(i),O({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const G=xe(),M=I(()=>(G.value?._installedModules||[]).some(e=>e.meta?.name==="@nuxt/image"||e.meta?.name==="@nuxt/image-edge")),h=I(()=>{const i=[];if(o.value.type==="image"){const e=v.value?.width?`
  width="${v.value.width}"
  height="${v.value.height}" `:" ";return i.push({lang:"vue-html",code:`<img${e}
  src="${o.value.publicPath}"
/>`,name:"Plain Image"}),M.value&&i.push({lang:"vue-html",code:`<NuxtImg${e}
  src="${o.value.publicPath}"
/>`,name:"Nuxt Img",docs:"https://image.nuxt.com/usage/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${e}
  src="${o.value.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxt.com/usage/nuxt-picture"}),i}return i.push({lang:"html",code:`<a download href="${o.value.publicPath}">
  Download ${o.value.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),i}),d=be(),m=we(),a=_e(()=>o.value.mtime),p=I(()=>{const i=o.value.size;return i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(2)} KB`:`${(i/1024/1024).toFixed(2)} MB`}),x=I(()=>{if(!v.value?.width||!v.value?.height)return"";const i=($,j)=>j?i(j,$%j):$,e=i(v.value.width,v.value.height);return e>3?`${v.value.width/e}:${v.value.height/e}`:""}),_=I(()=>["image","text","video","audio","font"].includes(o.value.type)),r=E(!1);async function A(){try{await J.deleteStaticAsset(await W(),o.value.filePath),o.value=void 0,r.value=!1,O({message:"Asset deleted",icon:"i-carbon-checkmark",classes:"text-green"})}catch(i){console.error(i),O({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const y=E(!1),U=E("");async function K(){const i=o.value.filePath.split("/"),e=i.slice(-1)[0].split(".").slice(0,-1).join(".");if(!U.value||U.value===e)return O({message:"Please enter a new name",icon:"i-carbon-warning",classes:"text-orange"});try{const $=i.slice(-1)[0].split(".").slice(-1)[0],j=`${i.slice(0,-1).join("/")}/${U.value}.${$}`;await J.renameStaticAsset(await W(),o.value.filePath,j),o.value=void 0,y.value=!1,O({message:"Asset renamed",icon:"i-carbon-checkmark",classes:"text-green"})}catch($){console.error($),O({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}return(i,e)=>{const $=re,j=Te,N=oe,de=Ue,Q=ke,ce=ae,ee=ne("tooltip");return l(),u(z,null,[t("div",rt,[n(_)?(l(),u(z,{key:0},[e[13]||(e[13]=t("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[t("div",{"x-divider":""}),t("div",{"flex-none":""}," Preview "),t("div",{"x-divider":""})],-1)),t("div",ut,[c($,{detail:"","max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:n(o),"text-content":n(g)},null,8,["asset","text-content"])])],64)):S("",!0),e[25]||(e[25]=t("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[t("div",{"x-divider":""}),t("div",{"flex-none":""}," Details "),t("div",{"x-divider":""})],-1)),t("table",dt,[t("tbody",null,[t("tr",null,[e[14]||(e[14]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1)),t("td",null,[t("div",ct,[c(j,{filepath:n(o).filePath,"text-left":""},null,8,["filepath"]),X(c(N,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",border:!1,onClick:e[0]||(e[0]=C=>n(m)(n(o).filePath))},null,512),[[ee,"Open in Editor"]])])])]),t("tr",null,[e[15]||(e[15]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1)),t("td",null,[t("div",pt,[t("div",mt,F(n(o).publicPath),1),X(c(N,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",border:!1,onClick:e[1]||(e[1]=C=>n(d)(n(o).publicPath,"assets-public-path"))},null,512),[[ee,"Copy public path"]]),X(c(N,{"flex-none":"",to:n(o).publicPath,icon:"carbon-launch",target:"_blank",border:!1,title:"Open in browser"},null,8,["to"]),[[ee,"Open in browser"]])])])]),t("tr",null,[e[16]||(e[16]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1)),t("td",ft,F(n(o).type),1)]),n(v)?.width?(l(),u(z,{key:0},[t("tr",null,[e[17]||(e[17]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1)),t("td",null,F(n(v).width)+" x "+F(n(v).height),1)]),n(x)?(l(),u("tr",vt,[e[18]||(e[18]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1)),t("td",null,F(n(x)),1)])):S("",!0)],64)):S("",!0),t("tr",null,[e[19]||(e[19]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1)),t("td",null,F(n(p)),1)]),t("tr",null,[e[20]||(e[20]=t("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1)),t("td",null,[D(F(new Date(n(o).mtime).toLocaleString())+" ",1),t("span",gt,"("+F(n(a))+")",1)])])])]),e[26]||(e[26]=t("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[t("div",{"x-divider":""}),t("div",{"flex-none":""}," Actions "),t("div",{"x-divider":""})],-1)),t("div",ht,[c(N,{to:n(o).publicPath,download:"",target:"_blank",icon:"carbon-download",n:"green"},{default:b(()=>e[21]||(e[21]=[D(" Download ")])),_:1},8,["to"]),n(o).type==="text"?(l(),V(N,{key:0,icon:"carbon-edit",n:"cyan",onClick:e[2]||(e[2]=C=>w.value=!n(w))},{default:b(()=>e[22]||(e[22]=[D(" Edit ")])),_:1})):S("",!0),c(N,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:e[3]||(e[3]=C=>y.value=!n(y))},{default:b(()=>e[23]||(e[23]=[D(" Rename ")])),_:1}),c(N,{icon:"carbon-delete",n:"red",onClick:e[4]||(e[4]=C=>r.value=!n(r))},{default:b(()=>e[24]||(e[24]=[D(" Delete ")])),_:1})]),e[27]||(e[27]=t("div",{"flex-auto":""},null,-1)),n(h).length?(l(),V(de,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":n(h)},null,8,["code-snippets"])):S("",!0)]),c(Q,{modelValue:n(r),"onUpdate:modelValue":e[6]||(e[6]=C=>R(r)?r.value=C:null)},{default:b(()=>[t("div",xt,[e[30]||(e[30]=t("span",null," Are you sure you want to delete this asset? ",-1)),t("div",bt,[c(N,{icon:"carbon-close",onClick:e[5]||(e[5]=C=>r.value=!1)},{default:b(()=>e[28]||(e[28]=[D(" Cancel ")])),_:1}),c(N,{icon:"carbon-delete",n:"red",onClick:A},{default:b(()=>e[29]||(e[29]=[D(" Delete ")])),_:1})])])]),_:1},8,["modelValue"]),c(Q,{modelValue:n(y),"onUpdate:modelValue":e[9]||(e[9]=C=>R(y)?y.value=C:null)},{default:b(()=>[t("div",wt,[c(ce,{modelValue:n(U),"onUpdate:modelValue":e[7]||(e[7]=C=>R(U)?U.value=C:null),placeholder:"New name",n:"blue"},null,8,["modelValue"]),t("div",_t,[c(N,{icon:"carbon-close",onClick:e[8]||(e[8]=C=>y.value=!1)},{default:b(()=>e[31]||(e[31]=[D(" Cancel ")])),_:1}),c(N,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:K},{default:b(()=>e[32]||(e[32]=[D(" Rename ")])),_:1})])])]),_:1},8,["modelValue"]),n(o).type==="text"?(l(),V(Q,{key:0,modelValue:n(w),"onUpdate:modelValue":e[12]||(e[12]=C=>R(w)?w.value=C:null)},{default:b(()=>[t("div",yt,[X(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=C=>R(T)?T.value=C:null),placeholder:"Item value...",class:"h-lg w-xl of-auto rounded-lg p-4 text-sm font-mono outline-none",onKeydown:ye(L,["enter"])},null,544),[[$e,n(T)]]),t("div",$t,[c(N,{icon:"carbon-close",onClick:e[11]||(e[11]=C=>w.value=!1)},{default:b(()=>e[33]||(e[33]=[D(" Cancel ")])),_:1}),c(N,{icon:"carbon:save",n:"primary",onClick:L},{default:b(()=>e[34]||(e[34]=[D(" save ")])),_:1})])])]),_:1},8,["modelValue"])):S("",!0)],64)}}}),Ct={"h-full":"","of-auto":""},Vt={"flex-none":"",flex:"~ gap2 items-center","text-lg":""},Pt={flex:"~ items-center justify-center",absolute:"","bottom--1":"","right--1":"","h-4":"","w-4":"","rounded-full":"","bg-primary:30":"","text-8px":""},At={flex:"~ col","w-30":"","of-auto":""},Dt={"text-xs":"",op75:""},Ft={op50:""},Nt={key:0},St={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},It={key:1,p2:"",grid:"~ cols-minmax-8rem"},Tt={key:1},Zt=q({__name:"assets",setup(B){const s=Ce(),f=E(!1),k=E(""),o=I(()=>new Ve(s.value||[],{keys:["path"]})),v=Pe(()=>{const h=[];for(const d of s.value||[]){const m=d.path.split(".").pop();m&&!h.find(a=>a.name===m)&&h.push({name:m,value:!0})}return h}),w=I(()=>(k.value?o.value.search(k.value).map(d=>d.item):s.value||[]).filter(d=>{const m=d.path.split(".").pop();return!m||v.some(a=>a.name===m&&a.value)})),T=I(()=>{const h={};for(const d of w.value){const m=`${d.path.split("/").slice(0,-1).join("/")}/`;h[m]||(h[m]=[]),h[m].push(d)}return Object.entries(h).sort(([d],[m])=>d.localeCompare(m))}),P=I(()=>{const h={path:"public",children:[]},d=(m,a,p)=>{const[x,..._]=a;let r=m.children.find(A=>A.path===x);r||(r={...p,path:x,children:[]},m.children.push(r)),_.length>1?d(r,_,p):_.length===1&&r.children.push({...p,path:_[0]})};return w.value.forEach(m=>{const a=m.path.split("/").filter(p=>p!=="");d(h,a,m)}),h.children}),g=E(),{view:L}=De("assets");function G(){L.value=L.value==="list"?"grid":"list"}Ae("Escape",()=>{g.value=void 0});const M=E();return(h,d)=>{const m=oe,a=Fe,p=Ne,x=Se,_=Ge,r=it,A=Ie,y=ue,U=kt,K=je,i=ne("tooltip");return l(),u("div",Ct,[c(x,{ref_key:"navbar",ref:M,search:n(k),"onUpdate:search":d[1]||(d[1]=e=>R(k)?k.value=e:null),pb2:""},{actions:b(()=>[t("div",Vt,[X(c(m,{icon:"carbon:cloud-upload",title:"File Upload",border:!1,onClick:d[0]||(d[0]=e=>f.value=!n(f))},null,512),[[i,"File Upload",void 0,{"bottom-end":!0}]]),n(v).length?(l(),V(p,{key:0,direction:"end",n:"sm primary"},{trigger:b(({click:e})=>[X(c(m,{icon:"carbon-filter",border:!1,title:"Filter",p3:"","text-lg":"",onClick:$=>e()},null,8,["onClick"]),[[i,"Filter",void 0,{"bottom-end":!0}]]),t("span",Pt,F(n(v).length),1)]),default:b(()=>[t("div",At,[(l(!0),u(z,null,Z(n(v),e=>(l(),V(a,{key:e.name,modelValue:e.value,"onUpdate:modelValue":$=>e.value=$,flex:"~ gap-2",rounded:"",px2:"",py2:""},{default:b(()=>[t("span",Dt,F(e.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])]),_:1})):S("",!0),X(c(m,{"text-lg":"",border:!1,icon:n(L)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:G},null,8,["icon"]),[[i,"Toggle View",void 0,{"bottom-end":!0}]])])]),default:b(()=>[t("div",Ft,[n(k)?(l(),u("span",Nt,F(n(w).length)+" matched · ",1)):S("",!0),t("span",null,F(n(s)?.length)+" assets in total",1)])]),_:1},8,["search"]),c(_,{modelValue:n(f),"onUpdate:modelValue":d[2]||(d[2]=e=>R(f)?f.value=e:null),folder:"/"},null,8,["modelValue"]),n(L)==="grid"?(l(),u(z,{key:0},[n(T).length>1?(l(!0),u(z,{key:0},Z(n(T),([e,$])=>(l(),V(A,{key:e,text:e,description:`${$.length} items`,open:$.length<=("DETAILS_MAX_ITEMS"in h?h.DETAILS_MAX_ITEMS:n(Ee)),padding:!1},{default:b(()=>[t("div",St,[(l(!0),u(z,null,Z($,j=>(l(),V(r,{key:j.path,asset:j,folder:e,onClick:N=>g.value=j},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(l(),u("div",It,[(l(!0),u(z,null,Z(n(w),e=>(l(),V(r,{key:e.path,asset:e,onClick:$=>g.value=e},null,8,["asset","onClick"]))),128))]))],64)):(l(),u("div",Tt,[(l(!0),u(z,null,Z(n(P),(e,$)=>(l(),V(y,{key:$,modelValue:n(g),"onUpdate:modelValue":d[3]||(d[3]=j=>R(g)?g.value=j:null),item:e},null,8,["modelValue","item"]))),128))])),c(K,{"model-value":!!n(g),"auto-close":"","w-120":"",top:n(M),onClose:d[5]||(d[5]=e=>g.value=void 0)},{default:b(()=>[n(g)?(l(),V(U,{key:0,modelValue:n(g),"onUpdate:modelValue":d[4]||(d[4]=e=>R(g)?g.value=e:null)},null,8,["modelValue"])):S("",!0)]),_:1},8,["model-value","top"])])}}});export{Zt as default};
